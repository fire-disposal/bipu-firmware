# BLE消息接收测试指南

## 概述
本文档描述了如何测试BIPI设备的BLE消息接收功能。

## BLE配置信息
- **设备名称**: BIPI_PAGER
- **服务UUID**: 0x1234
- **特征UUID**: 0x5678
- **消息格式**: sender|message

## 测试步骤

### 1. 设备准备
1. 确保BIPI设备已上电并正常启动
2. 观察RGB灯状态：
   - 红色：BLE错误状态
   - 蓝色闪烁：BLE已连接
   - 蓝色常亮：BLE广播中

### 2. 手机端测试
1. 在手机上下载BLE调试工具（如nRF Connect、LightBlue等）
2. 打开BLE调试工具，扫描附近的BLE设备
3. 找到名为"BIPI_PAGER"的设备并连接
4. 连接成功后，设备会有震动反馈和蓝色LED指示

### 3. 消息发送测试
1. 在BLE调试工具中找到服务UUID为0x1234的服务
2. 找到特征UUID为0x5678的特征
3. 向该特征写入数据，格式为：`sender|message`
   - 例如：`手机|这是一条测试消息`
   - 例如：`系统|欢迎使用BIPI设备`

### 4. 验证消息接收
1. 发送消息后，设备会有震动反馈
2. 按任意键唤醒屏幕（如果从待机状态）
3. 使用上下键浏览消息
4. 使用确认键标记消息为已读

## 消息格式说明
- **格式**: `发送者|消息内容`
- **发送者**: 最多15个字符
- **消息内容**: 最多127个字符
- **分隔符**: 使用竖线`|`分隔发送者和消息内容

## 状态指示
- **震动**: 表示收到新消息
- **蓝色LED**: BLE连接状态指示
- **屏幕显示**: 显示消息列表和详细内容

## 故障排除
1. **无法扫描到设备**：
   - 检查设备是否已正常启动
   - 确认RGB灯是否有状态指示
   - 重启设备

2. **连接失败**：
   - 确认手机蓝牙已开启
   - 尝试重新扫描和连接
   - 检查设备是否在广播状态

3. **消息发送失败**：
   - 确认消息格式正确
   - 检查UUID是否正确
   - 确认设备已连接

## 技术信息
- **BLE协议**: Bluetooth 4.2+
- **GATT服务**: 自定义服务
- **特征属性**: 读/写/通知
- **最大消息长度**: 128字节